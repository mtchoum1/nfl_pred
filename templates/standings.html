{% extends "layout.html" %}

{% block title %}NFL Standings{% endblock %}

{% block content %}
<div class="text-center mb-6">
    <h1 class="text-3xl font-extrabold text-gray-900 tracking-tight">NFL Standings Comparison</h1>
    <p class="mt-2 text-lg text-gray-600">Actual vs. Smore Sports Predicted Records</p>
</div>

<div class="bg-white rounded-lg shadow p-4 mb-8 flex items-center justify-center gap-6">
    <div>
        <label for="year-select" class="text-sm font-medium text-gray-700">Year:</label>
        <select id="year-select" data-selected="{{ selected_year }}" class="mt-1 rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500"></select>
    </div>
    <div>
        <label for="seasontype-select" class="text-sm font-medium text-gray-700">Season:</label>
        <select id="seasontype-select" data-selected="{{ selected_seasontype }}" class="mt-1 rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500">
            <option value="2">Regular Season</option>
            <option value="3">Postseason</option>
        </select>
    </div>
</div>

<div class="bg-white rounded-lg shadow overflow-hidden">
    <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
            <tr>
                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Team</th>
                <th scope="col" class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Actual Record</th>
                <th scope="col" class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Predicted Record</th>
                <th scope="col" class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider" title="Difference in wins (Actual - Predicted)">Win Diff.</th>
            </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
            {% if standings %}
                {% for team_abv, data in standings.items() %}
                <tr>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <div class="flex-shrink-0 h-8 w-8">
                                <img class="team-logo" src="{{ data.team_logo }}" alt="{{ team_abv }} logo">
                            </div>
                            <div class="ml-4">
                                <div class="text-sm font-bold text-gray-900">{{ data.team_name }}</div>
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-center text-sm font-medium text-gray-800">{{ data.actual_record }}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-center text-sm font-medium text-gray-500">{{ data.predicted_record }}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-center text-sm font-bold
                        {% if data.difference > 0 %} diff-pos
                        {% elif data.difference < 0 %} diff-neg
                        {% else %} diff-zero
                        {% endif %}">
                        {% if data.difference > 0 %}+{% endif %}{{ data.difference }}
                    </td>
                </tr>
                {% endfor %}
            {% else %}
                <tr>
                    <td colspan="4" class="px-6 py-12 text-center text-gray-500">
                        No historical data found for this selection.
                    </td>
                </tr>
            {% endif %}
        </tbody>
    </table>
</div>
{% endblock %}

{% block scripts %}
<script type="module" src="{{ url_for('static', filename='js/standings.js') }}"></script>
{% endblock %}